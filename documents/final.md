## Introduction

Every fall and every spring, students across the country struggling with the same feelings of panic, uncertainty and indecision as they are asked to choose the courses that will define their college experience in the subsequent semester. Which core requirements do they need to get out of the way? Which electives should they take now? Which professors should they try to get? During what times of the day and week do they want to be in class? All these questions and more, must be carefully weighed as they try to make the best decision. 

Students at the Claremont Colleges struggle with these same questions. We have some tools to help us visualize the possibilities for the subsequent semester, such as the [Scheduler App](http://scheduler.5capps.com/#) and the [ASPC-Scheduler App](https://aspc.pomona.edu/courses/schedule/), but neither gives the users the full flexibility they may want and need to specify exactly what their preferences are. 

I designed and implemented the CourseScheduler DSL to meet this need by allow students to express their preferences for courses with the fluidity and expressiveness of a DSL. Rather than looking through all the possible schedules with different combinations of the classes they are interested in, students should be able to input a list of all the courses they might be interested in, and then write a program describing the kind of schedule they want, run it, and get a list of the possibly schedules that most closely align with their preferences. CourseScheduler works very well with the Scheduler App which interfaces with the 5C class portal, but CourseScheduler is general enough that it has the potential to be used with classes or schedules at other places as well, as long as the user can generate an initial class list in the correct format.

The essence of CourseScheduler is constraint satisfaction. The user's program (a list of their preferences) provide the constraints which are used to maipulate the database of classes and determine what combinations of classes will generate the most preferred schedules. Additional constraints are then checked to insure that no invalid schedules, such as schedules with overlapping class times, to many or two few classes, or multiple copies of the same class, are generated).

##Language Design Details

The user writes their program by simply typing a list of their preferences, seperated by commas and ending with a period. They can create very long programs if they wish to rate many different professors, sections, classes, time slots, or days. However, because the syntax is limited to these five commands plus two others (See Note 1 Below) which can only be used once (minimum and maximum course load), the language is very simple, easy to use, and specifically applicable to the domain, and it is the only DSL I have seen which appears to work in this domain. There are many data vizualization tools which will display classes, like the [Scheduler App](http://scheduler.5capps.com/#) and the [ASPC-Scheduler App](https://aspc.pomona.edu/courses/schedule/), but none allow the user to write actual programs to explain what they are looking for in an ideal schedule.

When the user runs the program, they are guided by clear and detailed instructions, through all of the necessary steps to generate the schedules which they want. There are very few control structures in the DSL which the user can access, but this is meant to be a protection for them, to keep the language very simple, and because such control structures should not be neccessary for creating schedules. The one big exception to this rule is the users ability, and in fact requirement, to specify at run time how much output they would like. This allows them to determine how much information they want to recieve from the program to insure that it is useful and relevant to their decision about which classes they will take.

The user creates the initial database at runtime with the input generated by the Scheduler App. This input is a giant list of all the classes in which the user is interested, in the form of embedded lists of class information. The user then manipulates the database by stating their preferences for particular characteristics of a class. Finally, the sourceCode file computes the preference value for every possible combination of classes which satisfies the basic restraints for a valid schedule. All of these schedules are lists of embedded lists which are passed from function to function by the sourceCode to check the value and the constrainsts, these are then sorted by value and printed out from most valuable to least or until the number of schedules requested by the user has been printed. The output is text based, although in the future I would like to send the output back to the Scheduler App and display it there. The output includes a schedules ranking, preference, and the number of credits it includes, as well as a list of class sections which it includes and their preference values.

There is basic error checking for all the functions which the user is expected to use. These are in the form of simple, but clear error messages for bad input values and the program still runs with the preferences that it could read, since that piece of data might not have been particularly relevant. The error I expect most often would come from simply mispelling the name of a professor or class and so allowing the program to continue running in spite of this, can show the user that their program is close to working and provide encouragement for novice programmers rather than scaring them away with harsh error messages and discouragement when they don't immediantly see the problem.


(Note 1) These 7 commands are the main ways the user is intended to use the language, although technically they can modify the database directly and then call generateSchedule again, or they could add professors and classes to the database by accessing the methods I used to create the database from the inital input list of classes. This could be useful, if they want to add things which are not available through portal, but should be done with caution.

##Example program(s)

A user's program could look like the program provided in the SampleUserFile.txt and reproduced below:

% A Possible User's Preferences

rateProf('Levy', 5),
rateProf('Lyzenga', 15),
rateProf('Williams', 8),
rateProf('Dodds', 100),
rateProf('Vosburg', 10),
rateProf('Adolph', 6),

rateClass('WRIT001', 5), 
rateClass('MATH030B', 7),
rateClass('CHEM024', 11),

rateSection('CHEM023A', 'HM-01', 8),
rateSection('WRIT001', 'HM-01', 17),
rateSection('ECON104', 'HM-01', 23),
rateSection('MATH035','HM-03', 12),
rateSection('PHYS023','HM-03', 23),

rateTimeBlock(8, 10, -5),
rateTimeBlock(13, 14.5, -5),


rateDay('Monday', -10),
rateDay('Friday', -20),

setMaxCourseLoad(17),
setMinCourseLoad(14).

When the user ran it, they would input the list of classes from which to build schedules (repreoduced below):

[['CHEM023A','HM-01',3,[8,30,2016],[12,16,2016],['Van Hecke','Johnson','Vosburg','Hawkins'],[[0,9,9.833333333333334,'HM Campus, Shanahan Center, 2460'],[2,9,9.833333333333334,'HM Campus, Shanahan Center, 2460'],[4,9,9.833333333333334,'HM Campus, Shanahan Center, 2460']]],
['CHEM023A','HM-02',3,[8,30,2016],[12,16,2016],['Van Hecke','Johnson','Vosburg','Hawkins'],[[0,9,9.833333333333334,'HM Campus, Shanahan Center, 2454'],[2,9,9.833333333333334,'HM Campus, Shanahan Center, 2454'],[4,9,9.833333333333334,'HM Campus, Shanahan Center, 2454']]],
['CHEM023A','HM-03',3,[8,30,2016],[12,16,2016],['Van Hecke','Johnson','Vosburg','Hawkins'],[[0,9,9.833333333333334,'HM Campus, Shanahan Center, 1480'],[2,9,9.833333333333334,'HM Campus, Shanahan Center, 1480'],[4,9,9.833333333333334,'HM Campus, Shanahan Center, 1480']]],
['CHEM024','HM-01',1,[8,30,2016],[12,16,2016],['Haushalter'],[[0,13.25,17.25,'HM Campus, Jacobs Science Center, 2308']]],
['CHEM024','HM-02',1,[8,30,2016],[12,16,2016],['Vosburg'],[[1,13.25,17.25,'HM Campus, Jacobs Science Center, 2308']]],
['CHEM024','HM-03',1,[8,30,2016],[12,16,2016],['Van Heuvelen'],[[2,13.25,17.25,'HM Campus, Jacobs Science Center, 2308']]],
['CSCI005','HM-01',3,[8,30,2016],[12,16,2016],['Dodds'],[[1,8.166666666666666,9.416666666666666,'HM Campus, Shanahan Center, 1430'],[3,8.166666666666666,9.416666666666666,'HM Campus, Shanahan Center, 1430']]],
['CSCI005','HM-02',3,[8,30,2016],[12,16,2016],['Kuenning'],[[1,9.583333333333334,10.833333333333334,'HM Campus, Beckman Hall, B126'],[3,9.583333333333334,10.833333333333334,'HM Campus, Beckman Hall, B126']]],
['MATH030B','HM-01',1.5,[8,30,2016],[10,14,2016],['Omar'],[[1,8.166666666666666,9.416666666666666,'HM Campus, Shanahan Center, 1480'],[3,8.166666666666666,9.416666666666666,'HM Campus, Shanahan Center, 1480']]],
['MATH030B','HM-02',1.5,[8,30,2016],[10,14,2016],['Omar'],[[1,9.583333333333334,10.833333333333334,'HM Campus, Shanahan Center, 1480'],[3,9.583333333333334,10.833333333333334,'HM Campus, Shanahan Center, 1480']]],
['MATH035','HM-01',1.5,[10,19,2016],[12,16,2016],['Martonosi'],[[1,8.166666666666666,9.416666666666666,'HM Campus, Shanahan Center, 3460'],[3,8.166666666666666,9.416666666666666,'HM Campus, Shanahan Center, 3460']]],
['MATH035','HM-02',1.5,[10,19,2016],[12,16,2016],['Martonosi'],[[1,9.583333333333334,10.833333333333334,'HM Campus, Shanahan Center, 3460'],[3,9.583333333333334,10.833333333333334,'HM Campus, Shanahan Center, 3460']]],
['MATH035','HM-03',1.5,[10,19,2016],[12,16,2016],['Williams'],[[1,8.166666666666666,9.416666666666666,'HM Campus, Shanahan Center, B450'],[3,8.166666666666666,9.416666666666666,'HM Campus, Shanahan Center, B450']]],
['MATH035','HM-04',1.5,[10,19,2016],[12,16,2016],['Williams'],[[1,9.583333333333334,10.833333333333334,'HM Campus, Shanahan Center, B450'],[3,9.583333333333334,10.833333333333334,'HM Campus, Shanahan Center, B450']]],
['PHYS023','HM-01',1.5,[8,30,2016],[10,14,2016],['Lyzenga','Chen'],[[3,12.083333333333334,13.083333333333334,'HM Campus, Shanahan Center, 1430'],[0,8,8.833333333333334,'HM Campus, Shanahan Center, B470'],[2,8,8.833333333333334,'HM Campus, Shanahan Center, B470']]],
['PHYS023','HM-02',1.5,[8,30,2016],[10,14,2016],['Lyzenga'],[[3,12.083333333333334,13.083333333333334,'HM Campus, Shanahan Center, 1430'],[0,8,8.833333333333334,'HM Campus, Shanahan Center, 3465'],[2,8,8.833333333333334,'HM Campus, Shanahan Center, 3465']]],
['PHYS023','HM-03',1.5,[8,30,2016],[10,14,2016],['Lyzenga','Sahakian'],[[3,12.083333333333334,13.083333333333334,'HM Campus, Shanahan Center, 1430'],[0,8,8.833333333333334,'HM Campus, Shanahan Center, 2407'],[2,8,8.833333333333334,'HM Campus, Shanahan Center, 2407']]],
['WRIT001','HM-01',1.5,[8,30,2016],[10,14,2016],['Levy','Van Heuvelen'],[[0,8,8.833333333333334,'HM Campus, Shanahan Center, 2421'],[2,8,8.833333333333334,'HM Campus, Shanahan Center, 2421'],[4,8,8.833333333333334,'HM Campus, Shanahan Center, 2421']]],
['WRIT001','HM-02',1.5,[8,30,2016],[10,14,2016],['Levy','Van Heuvelen'],[[0,8,8.833333333333334,'HM Campus, Shanahan Center, 2421'],[2,8,8.833333333333334,'HM Campus, Shanahan Center, 2421'],[4,8,8.833333333333334,'HM Campus, Shanahan Center, 2421']]],
['WRIT001','HM-03',1.5,[8,30,2016],[10,14,2016],['Adolph','Wu'],[[0,8,8.833333333333334,'HM Campus, Shanahan Center, 2425'],[2,8,8.833333333333334,'HM Campus, Shanahan Center, 2425'],[4,8,8.833333333333334,'HM Campus, Shanahan Center, 2425']]],
['ECON104','HM-01',3,[8,30,2016],[12,16,2016],['Evans'],[[1,13.25,14.5,'HM Campus, Shanahan Center, 1430'],[3,13.25,14.5,'HM Campus, Shanahan Center, 1430']]],
['MS 120','HM-01',3,[8,30,2016],[12,16,2016],['Mayeri'],[[1,13.25,14.5,'HM Campus, Shanahan Center, 2421'],[3,13.25,14.5,'HM Campus, Shanahan Center, 2421'],[1,18,20,'HM Campus, Shanahan Center, B480']]]].

Input the name of their program file ('SampleUserFile.txt'.) and the number of schedules to generate (10.) and get the following output in just a few seconds:

Schedule Number: 1 has 14.5 units and a preference value of 120
CHEM023A HM-01 -27
CHEM024 HM-03 11
CSCI005 HM-01 90
MATH030B HM-02 7
MATH035 HM-04 8
PHYS023 HM-03 18
ECON104 HM-01 13

Schedule Number: 2 has 14.5 units and a preference value of 112
CHEM023A HM-03 -35
CHEM024 HM-03 11
CSCI005 HM-01 90
MATH030B HM-02 7
MATH035 HM-04 8
PHYS023 HM-03 18
ECON104 HM-01 13

Schedule Number: 3 has 14.5 units and a preference value of 112
CHEM023A HM-02 -35
CHEM024 HM-03 11
CSCI005 HM-01 90
MATH030B HM-02 7
MATH035 HM-04 8
PHYS023 HM-03 18
ECON104 HM-01 13

Schedule Number: 4 has 14.5 units and a preference value of 112
CHEM023A HM-01 -27
CHEM024 HM-03 11
CSCI005 HM-01 90
MATH030B HM-02 7
MATH035 HM-02 0
PHYS023 HM-03 18
ECON104 HM-01 13

Schedule Number: 5 has 14.5 units and a preference value of 110
CHEM023A HM-01 -27
CHEM024 HM-01 1
CSCI005 HM-01 90
MATH030B HM-02 7
MATH035 HM-04 8
PHYS023 HM-03 18
ECON104 HM-01 13

Schedule Number: 6 has 14.5 units and a preference value of 104
CHEM023A HM-03 -35
CHEM024 HM-03 11
CSCI005 HM-01 90
MATH030B HM-02 7
MATH035 HM-02 0
PHYS023 HM-03 18
ECON104 HM-01 13

Schedule Number: 7 has 14.5 units and a preference value of 104
CHEM023A HM-02 -35
CHEM024 HM-03 11
CSCI005 HM-01 90
MATH030B HM-02 7
MATH035 HM-02 0
PHYS023 HM-03 18
ECON104 HM-01 13

Schedule Number: 8 has 14.5 units and a preference value of 102
CHEM023A HM-03 -35
CHEM024 HM-01 1
CSCI005 HM-01 90
MATH030B HM-02 7
MATH035 HM-04 8
PHYS023 HM-03 18
ECON104 HM-01 13

Schedule Number: 9 has 14.5 units and a preference value of 102
CHEM023A HM-02 -35
CHEM024 HM-01 1
CSCI005 HM-01 90
MATH030B HM-02 7
MATH035 HM-04 8
PHYS023 HM-03 18
ECON104 HM-01 13

Schedule Number: 10 has 14.5 units and a preference value of 102
CHEM023A HM-01 -27
CHEM024 HM-01 1
CSCI005 HM-01 90
MATH030B HM-02 7
MATH035 HM-02 0
PHYS023 HM-03 18
ECON104 HM-01 13


## Language Implementation


## Evaluation






